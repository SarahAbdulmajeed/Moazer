<div class="space-y-4">
  {% for m in c.messages.all %}
    <div class="flex flex-col {% if m.sender == request.user %}items-end{% else %}items-start{% endif %}">
      <!-- Message Bubble -->
      <div class="max-w-[70%] p-3 rounded-2xl shadow-sm {% if m.sender == request.user %} bg-blue-100 text-gray-800 rounded-bl-none {% else %} bg-gray-50 text-gray-700 border border-gray-200 rounded-br-none {% endif %}">
        <!-- Sender Name -->
        <div class="font-semibold text-sm text-gray-600 mb-1"> {{ m.sender.first_name }}</div>
        <!-- Message Content -->
        <p class="text-sm leading-relaxed break-words whitespace-pre-line">{{ m.content }}</p>
      </div>
      <!-- Time & Date under the bubble -->
      <div class="text-[11px] text-gray-400 mt-1 {% if m.sender == request.user %}text-right{% else %}text-left{% endif %}"> {{ m.created_at|date:"H:i" }} — {{ m.created_at|date:"Y-m-d" }}</div>
    </div>
  {% empty %}
    <div class="text-gray-400 text-center text-sm">لا توجد رسائل بعد.</div>
  {% endfor %}
</div>
