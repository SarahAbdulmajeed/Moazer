{% extends "main/base.html" %}
{% block title %}قائمة الخبراء{% endblock %}
{% block content %}
<h3 class="mb-4">قائمة الخبراء</h3>

{% if experts %}
  <div class="grid gap-3">
    {% for ex in experts %}
      <div class="border rounded p-3 bg-white/80">
        <div class="flex items-center justify-between gap-3">
          <div>
            <div class="font-semibold">{{ ex.user.username }}</div>
            <div class="text-sm text-gray-600">{{ ex.city|default:"—" }}</div>
          </div>
          <div class="text-end text-sm">
            <div>السعر: <span class="font-semibold">{{ ex.consultation_price|default:"0.00" }}</span> ر.س</div>
            <div>التقييم: <span class="font-semibold">{{ ex.rating_avg|default:"0.0" }}</span> ({{ ex.rating_count }} مقيم)</div>
          </div>
        </div>

        {% if ex.specializations.all %}
          <div class="mt-2 text-sm">
            <span class="text-gray-600">التخصصات:</span>
            {% for s in ex.specializations.all %}
              <span class="inline-block px-2 py-0.5 border rounded ms-1">{{ s.name }}</span>
            {% empty %} — {% endfor %}
          </div>
        {% endif %}

        {% if ex.consultation_types.all %}
          <div class="mt-1 text-sm">
            <span class="text-gray-600">أنواع الاستشارات:</span>
            {% for t in ex.consultation_types.all %}
              <span class="inline-block px-2 py-0.5 border rounded ms-1">{{ t.name }}</span>
            {% empty %} — {% endfor %}
          </div>
        {% endif %}

        <div class="mt-3 flex gap-2">
          <a class="inline-block px-3 py-1 rounded bg-black text-white"
             href="{% url 'consultations:create_view' expert_id=ex.user.id %}">
            طلب خدمة استشارة
          </a>

          <a class="inline-block px-3 py-1 rounded border"
             href="{% url 'accounts:expert_detail' user_id=ex.user.id %}">
            عرض الملف الشخصي
          </a>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="text-gray-600">لا يوجد خبراء بعد.</div>
{% endif %}
{% endblock %}
